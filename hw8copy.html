<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<Title>Song List</Title>
<style>
	.noDisplay {
		display: none;
	}	
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script language = "javascript">


$(document).ready (function() {
	var songs = [];
	$.getJSON("ajax/songs.json", function(data) {
  		$.each( data, function( key, val ) {
    	songs.push( "<li id='" + key + "'>" + val + "</li>" );
  		});
		songStr = JSON.stringify(songs);
		
	document.getElementById("part2").innerHTML += "<br>" + songStr + "<br><br>";
	document.getElementById("part3").innerHTML += "<br>" + listSongs(songs);
	
	$('select').change(function() {
		displayGenre($("#genres").val(), songs);
		
	});
	});
	
});
	
	function listSongs(songs) {
		toReturn = "";
		for (i = 0; i < 10; i++) {
			toReturn += songs[i]["Title"] + "<br>";
			toReturn += "Artist: " + songs[i]["Artist"] + "<br>";
			toReturn += "Genre: " + songs[i]["Genre"] + "<br>";
			toReturn += "Released " + songs[i]["Year"] + "<br><br>";
		}
		return toReturn;
	}
		
	
	
	function displayGenre(genre, songs) {
		if (genre == "select-genre") {
			toDisplay = "";
		} else {
			toDisplay = getGenreString(genre, songs);
		}
		document.getElementById("displayGenres").innerHTML = toDisplay;
		$("#displayGenres").css("display","inline-block");
	} 
	
	function getGenreString(genre, songs) {
		toReturn = "<br>";
		for (i = 0; i < 10; i++) {
			for (j = 0; j < songs[i]["Genre"].length; j++) {
				if (songs[i]["Genre"][j] == genre) {
					toReturn += songs[i]["Title"] + "<br>";
					toReturn +="Artist: " + songs[i]["Artist"] + "<br>";
					toReturn += "Genre: " + songs[i]["Genre"] + "<br>";
					toReturn += "Released " + songs[i]["Year"] + "<br><br>"; 
				}
			}
		}
		return toReturn;
	}

</script>
	
</head>

<body>
	<div id = "part2">
	<strong>Part 2</strong>
	</div>
	<div id = "part3">
	<strong>Part 3</strong>
	</div>
	<div id = "part4">
	<strong>Part 4</strong>
	<form>
	<select id="genres" onChange = "">
		<option name = "nv" value = "select-genre">Select Genre</option>
  		<option name = "p" value="pop">Pop</option>
		<option name = "i" value="indie">Indie</option>
  		<option name = "r" value="rock">Rock</option>
  		<option name = "d" value="disco">Disco</option>
 		<option name = "rb" value="r&b">R&amp;B</option>
		<option name = "alt" value="alternative">Alternative</option>
		</select>
	</form>
	</div>
	<div id = "displayGenres" class = "noDisplay"></div>
</body>
</html>
